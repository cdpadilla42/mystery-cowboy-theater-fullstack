(this["webpackJsonpmystery-cowboy-theater"]=this["webpackJsonpmystery-cowboy-theater"]||[]).push([[0],{29:function(e,t,a){},45:function(e,t,a){e.exports=a(90)},50:function(e,t,a){},51:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(40),c=a.n(o),i=(a(50),a(43)),s=a(6),l=a(2),m=a(3),u=a(5),p=a(4);function d(e){return"$".concat((e/100).toFixed(2))}function v(){var e;return(e=["Congress-Avenue","Sixth-Street","Rainey-Street","West-End-Market-District","Seaholm-District","Barton-Springs-Road","West-Anderson-Ln","Red-River-Cultural-District","The-Domain","Mueller","West-Campus","Airport-Blvd"])[Math.floor(Math.random()*e.length)]}function h(e){return new Intl.DateTimeFormat("en-us",{weekday:"long",hour:"numeric"}).format(Date.parse(e))}a(51);var f=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).theaterNameRef=r.a.createRef(),e.handleFormSubmit=function(t){t.preventDefault();var a=e.theaterNameRef.current.value;e.props.history.push("/theater/".concat(a))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"theater-picker"},r.a.createElement("h1",null,"Chose your theater"),r.a.createElement("div",{className:"picker"},r.a.createElement("input",{type:"text",name:"theater-name",ref:this.theaterNameRef,value:v()}),r.a.createElement("button",{type:"submit"},"Visit Theater Page")))}}]),a}(n.Component),g=a(8),b=(a(29),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderOrderButton=function(){return r.a.createElement("li",null,r.a.createElement("button",{tabIndex:"0",class:"nav__link",onClick:e.props.openModalNav},"View Order (".concat(e.props.calcTotalTickets(),")")))},e.renderOrderButtonMobile=function(){return r.a.createElement("button",{tabIndex:"0",class:"nav__link",onClick:function(){e.props.openModalNav(),e.props.closeMobileNav()},className:"mobile_nav__button"},"View Order (".concat(e.props.calcTotalTickets(),")"))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav__container"},r.a.createElement("a",{href:"/theater/".concat(this.props.storeId),className:"nav__logo"},"MCT"),r.a.createElement("a",{href:"/theater/".concat(this.props.storeId),className:"nav__location"},this.props.storeId),r.a.createElement("ul",{className:"nav__menu"},r.a.createElement("li",null,r.a.createElement("a",{href:"/theater/".concat(this.props.storeId,"/update-movies")},"Edit Movies")),this.props.isAdminPage?null:this.renderOrderButton()),r.a.createElement("div",{className:"nav__mobile_content"},r.a.createElement("button",{className:"nav__hamburger",onClick:this.props.openMobileNav},r.a.createElement("i",{className:"fas fa-bars"}))))),r.a.createElement("div",{className:this.props.mobileNavOpen?"mobile_nav open":"mobile_nav"},r.a.createElement("button",{className:"mobile_nav__close",onClick:this.props.closeMobileNav},"\xd7"),r.a.createElement("a",{className:"mobile_nav__item",href:"/theater/".concat(this.props.storeId,"/update-movies")},"Edit Movies"),this.props.isAdminPage?null:this.renderOrderButtonMobile()))}}]),a}(n.Component)),_=(n.Component,function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKey=function(t){if("Enter"===t.key){var a=t.currentTarget.dataset.key;e.props.selectMovie(a)}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.movies;return r.a.createElement("section",{class:"movies"},r.a.createElement("div",{class:"movies__styled_background"}),r.a.createElement("ul",{class:"movies__list",tabIndex:"-1"},Object.keys(t).map((function(a){return r.a.createElement("li",null,r.a.createElement("img",{src:t[a].image,key:a,"data-key":a,onClick:function(){return e.props.selectMovie(a)},onKeyUp:e.handleKey,alt:"",srcset:"",tabIndex:"0"}))}))))}}]),a}(n.Component)),E=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;if(!this.props.movies[this.props.index])return null;var t=this.props.movies,a=this.props.index,n={backgroundImage:"url(".concat(t[a].image,")")};return r.a.createElement("div",{class:"cart__item"},r.a.createElement("div",{class:"cart__remove_item",onClick:function(){return e.props.deleteFromOrder(e.props.index)},tabIndex:"0"},"\xd7"),r.a.createElement("div",{class:"cart__item_image",style:n}),r.a.createElement("div",{class:"cart__item_details"},r.a.createElement("p",null,t[a].name),r.a.createElement("div",{class:"quantity_editor"},r.a.createElement("button",{class:"quantity_editor__minus",onClick:function(){return e.props.subtractTicketFromOrder(a)}},"-"),r.a.createElement("div",{class:"quantity_editor__quantity"},this.props.order[a]),r.a.createElement("button",{class:"quantity_editor__plus",onClick:function(){return e.props.addToOrder(a)}},"+")),r.a.createElement("p",{class:"cart__item_price"},d(t[a].price*this.props.order[a]))))}}]),a}(n.Component),y=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderOrderItem=function(t){var a=e.props.order,n=e.props.movies[t];return n?r.a.createElement("p",{key:t},"".concat(a[t]," tickets for ").concat(n.name),r.a.createElement("button",{id:"order_delete",onClick:function(){return e.props.deleteFromOrder(t)},className:"delete-order-item"},"\xd7")):null},e.renderTotalTicketQuantity=function(){return Object.keys(e.props.order).reduce((function(t,a){return t+e.props.order[a]}),0)},e.calculateTicketTotal=function(){var t=e.props.movies,a=e.props.order;return Object.keys(a).reduce((function(e,n){if(!t[n])return null;var r=t[n].price;return e+a[n]*r}),0)},e.calculateOrderTotal=function(){return e.calculateTicketTotal()+300},e.renderTicketTotal=function(){return r.a.createElement("div",{className:"cart__pricing_display"},r.a.createElement("div",{class:"cart__items"},r.a.createElement("span",{class:"cart__items_quantity"},"tickets: ",e.renderTotalTicketQuantity()),r.a.createElement("span",{class:"cart__items_price"},d(e.calculateTicketTotal()))),r.a.createElement("div",{class:"cart__shipping"},r.a.createElement("span",{class:"cart__fee"},"Online Fee"),r.a.createElement("span",{class:"cart__fee_price"},"$3.00")),r.a.createElement("div",{class:"cart__subtotal"},r.a.createElement("span",{class:"cart__subtotal"},"Subtotal"),r.a.createElement("span",{class:"cart__subtotal_price"},d(e.calculateOrderTotal()))))},e.renderBlankOrder=function(){return r.a.createElement("h2",null,"You don't have any tickets yet!")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.movies,a=this.props.order,n=Object.keys(a);n.reduce((function(e,n){if(!t[n])return null;var r=t[n].price;return e+a[n]*r}),0);return n.length?r.a.createElement("section",{className:"cart"},r.a.createElement("div",{class:"cart__display_items"},Object.keys(a).map((function(a){return r.a.createElement(E,{deleteFromOrder:e.props.deleteFromOrder,index:a,key:a,movies:t,subtractTicketFromOrder:e.props.subtractTicketFromOrder,order:e.props.order,addToOrder:e.props.addToOrder})}))),r.a.createElement("hr",null),this.renderTicketTotal()):this.renderBlankOrder()}}]),a}(n.Component),O=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.movies[this.props.selectedMovie];return this.props.selectedMovie?r.a.createElement("section",{class:"selected_movie"},r.a.createElement("div",{class:"selected_movie__image"},r.a.createElement("img",{src:t.image,alt:""})),r.a.createElement("div",{class:"selected_movie__details"},r.a.createElement("div",{class:"selected_movie__details_wrap"},r.a.createElement("h3",null,t.name),r.a.createElement("div",{class:"clear"}),r.a.createElement("h4",null,"About"),r.a.createElement("p",null,t.desc),r.a.createElement("h4",null,"Ticket Price"),r.a.createElement("p",null,"Adult: ",d(t.price)),r.a.createElement("h4",null,"Showing"),r.a.createElement("p",null,"Date: ",h(t.date)),r.a.createElement("button",{onClick:function(){return e.props.addToOrder(e.props.selectedMovie)},class:"selected_movie__add_ticket"},"Purchase Ticket")))):r.a.createElement("img",{src:"/imgs/mst3klogo.png",alt:"MST3K logo",class:"selected_movie__placeholder"})}}]),a}(n.Component),k=a(10),M=a.n(k),N=a(17),j=a(20),S={movie1:{name:"Eegah!",image:"/imgs/eegah.jpg",desc:"A giant caveman stumbles across modern civilization, then kidnaps a teenage girl and her father.",price:1500,showtime:1589990571180},movie2:{name:"Pod People",image:"/imgs/podpeople.jpg",desc:"A child adopts a large egg which hatches into a mischievous alien, while poachers and a group of pop musicians on a wilderness vacation run into trouble.",price:1300},movie3:{name:"Gamera",image:"/imgs/gamera.jpg",desc:"A military plane crashes in the Arctic, awakening giant turtle Gamera. It attacks Japan, yet seemingly befriends a young boy.",price:1150},movie4:{name:"Cave Dwellers",image:"/imgs/cavedwellers.jpg",desc:"In the first sequel to Ator, the Fighting Eagle, Ator helps a warrior woman rescue her father from an evil overlord.",price:1500},movie5:{name:"Santa Claus Conquers the Martians",image:"/imgs/SantaConquers.jpg",desc:"Martians abduct Santa Claus and two human children in hopes of bringing Christmas to their planet.",price:1300},movie6:{name:"Manos: The Hands of Fate",image:"/imgs/default-poster.jpg",desc:"A hapless family on a car trip in rural Texas take refuge at an inn that harbors a deadly cult.",price:1800},movie7:{name:"Werewolf",image:"/imgs/werewolf.jpg",desc:"After digging up strange bones, a man becomes a werewolf!",price:1200},movie8:{name:"The Final Sacrifice",image:"/imgs/finalsacrifice.jpg",desc:"A teen follows a map left for him by his long-dead father, runs afoul of an evil cult, then teams up with a beer-guzzling drifter who has a secret.",price:1500}},w=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var a=t.target,n=Object(g.a)(Object(g.a)({},e.props.movie),{},Object(j.a)({},a.name,a.value));e.props.updateMovie(n,e.props.index)},e.handleFormSubmit=function(e){e.preventDefault()},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.movie;return r.a.createElement("div",{className:"edit_movie_form"},r.a.createElement("figure",{className:"edit_movie_form__image_preview"},r.a.createElement("img",{src:t.image,alt:""})),r.a.createElement("section",{className:"edit_movie_form__form"},r.a.createElement("form",{action:"#"},r.a.createElement("div",{className:"edit_movie_form__first_row_flex_wrap"},r.a.createElement("input",{type:"text",name:"name",id:"name",placeholder:"Name",className:"resize-ta",value:t.name,onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"price",id:"price",placeholder:"Price",value:t.price,onChange:this.handleChange})),r.a.createElement("input",{type:"text",name:"image",id:"image",placeholder:"Image",value:t.image,onChange:this.handleChange}),r.a.createElement("textarea",{name:"description",id:"description",placeholder:"Description",onChange:this.handleChange},t.desc),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.props.deleteMovie(e.props.index)}},"Delete Movie"),r.a.createElement("button",{id:"save_btn",onClick:function(t){t.preventDefault(),e.props.saveMovieUpdateToDB(e.props.index)}},"Save Changes"))))}}]),a}(n.Component),T=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={image:"/imgs/default-poster.jpg"},e.nameRef=r.a.createRef(),e.descriptionRef=r.a.createRef(),e.priceRef=r.a.createRef(),e.theaterRef=r.a.createRef(),e.imageRef=r.a.createRef(),e.handleFormSubmit=function(t){t.preventDefault();var a={name:e.nameRef.current.value,desc:e.descriptionRef.current.value,price:parseInt(e.priceRef.current.value),image:e.state.image};console.log(a),e.props.addMovie(a),e.props.closeModalNav()},e}return Object(m.a)(a,[{key:"render",value:function(){this.props.movie;return r.a.createElement("section",{className:"edit_movie_form__form"},r.a.createElement("h2",null,"Add a New Movie"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"edit_movie_form__first_row_flex_wrap"},r.a.createElement("input",{type:"text",name:"name",id:"name",placeholder:"Name",className:"resize-ta",ref:this.nameRef,onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"price",id:"price",placeholder:"Price",ref:this.priceRef,onChange:this.handleChange})),r.a.createElement("input",{type:"text",name:"image",id:"image",placeholder:"Image",onChange:this.handleChange,value:this.state.image}),r.a.createElement("textarea",{name:"description",id:"description",placeholder:"Description",ref:this.descriptionRef,onChange:this.handleChange}),r.a.createElement("button",{id:"dlt_btn"},"Submit")))}}]),a}(n.Component),C=a(16),x=a.n(C),I=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={loginErr:!1},e.theaterNameRef=r.a.createRef(),e.usernameRef=r.a.createRef(),e.pwRef=r.a.createRef(),e.submitBttnRef=r.a.createRef(),e.safeHandleFormSubmit=function(){var t=Object(N.a)(M.a.mark((function t(a){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleFormSubmit(a).catch((function(t){console.error(t),e.displayLoginErr(),setTimeout((function(){e.setState({loginErr:!1})}),5e3)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFormSubmit=function(){var t=Object(N.a)(M.a.mark((function t(a){var n,r,o,c,i,s;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.usernameRef.current.value,r=e.pwRef.current.value,console.log(n,r),t.next=6,x.a.post("../../api/users/login",{username:n,password:r});case 6:o=t.sent,console.log(o),c=o.data,i=c.token,s=c.user,console.log(i,s),e.props.storeUser(s,i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.displayLoginErr=function(){e.setState({loginErr:!0})},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login_page__container"},r.a.createElement("h1",{className:"login_page__heading"},"Chose your theater"),r.a.createElement("form",{onSubmit:this.safeHandleFormSubmit,className:"login_page__form"},r.a.createElement("label",{className:"login_page__field",htmlFor:"username"},r.a.createElement("span",{className:"login_page__label"},"Username"),r.a.createElement("input",{type:"text",name:"username",id:"username",ref:this.usernameRef})),r.a.createElement("label",{htmlFor:"pw",className:"login_page__field"},r.a.createElement("span",{className:"login_page__label"},"Password"),r.a.createElement("input",{type:"password",name:"pw",id:"pw",ref:this.pwRef})),r.a.createElement("div",{className:"login_page__button_container"},r.a.createElement("button",{type:"submit",className:this.state.loginErr?"login_page__login_button fail":"login_page__login_button",ref:this.submitBttnRef},this.state.loginErr?"Error":"Login"))))}}]),a}(n.Component),R=a(41),B=a.n(R),D=a(42),A=a.n(D).a.initializeApp({apiKey:"AIzaSyAH5UaXLUT_mhRuY8eALKor1sBlWliHbm8",authDomain:"mystery-cowboy-theater.firebaseapp.com",databaseURL:"https://mystery-cowboy-theater.firebaseio.com",projectId:"mystery-cowboy-theater",storageBucket:"mystery-cowboy-theater.appspot.com",messagingSenderId:"690314762390",appId:"1:690314762390:web:842d7e63c64f2775eb8ab7"}),F=(B.a.createClass(A.database()),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={movies:{},order:{},mobileNavOpen:!1,cartModalOpen:!1,selectedMovie:null,isAdminPage:!0,user:{}},e.addMovie=function(t){e.saveNewMovieToState(t),e.saveNewMovieToDB(t)},e.saveNewMovieToState=function(t){var a="movie".concat(Date.now()),n=Object(g.a)(Object(g.a)({},e.state.movies),{},Object(j.a)({},a,t));e.setState({movies:n})},e.saveNewMovieToDB=function(){var t=Object(N.a)(M.a.mark((function t(a){var n,r,o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{authorization:"Bearer ".concat(e.state.user.token)}},r=e.props.match.params.theaterId,t.next=4,x.a.post("/api/".concat(r),a,n).catch((function(e){return console.log(e)}));case 4:o=t.sent,console.log(o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateMovie=function(t,a){var n=Object(g.a)(Object(g.a)({},e.state.movies),{},Object(j.a)({},a,t));e.setState({movies:n})},e.saveMovieUpdateToDB=function(){var t=Object(N.a)(M.a.mark((function t(a){var n,r,o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{authorization:"Bearer ".concat(e.state.user.token)}},r=e.props.match.params.theaterId,e.saveButtonSaving(),t.next=5,x.a.put("/api/".concat(r,"/").concat(a),e.state.movies[a],n).catch((function(e){return console.log(e)}));case 5:o=t.sent,console.log(o),o&&e.saveButtonSuccess();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveButtonSaving=function(){var e=document.querySelector("#save_btn");e.classList.add("saving"),e.textContent="Saving..."},e.saveButtonSuccess=function(){var t=document.querySelector("#save_btn");t.classList.remove("saving"),t.classList.add("save_success"),t.textContent="Changes Saved!",setTimeout(e.revertSaveButton,3e3)},e.revertSaveButton=function(){var e=document.querySelector("#save_btn");e.classList.remove("save_success"),e.textContent="Save Changes"},e.deleteMovie=function(t){e.deleteMovieFromState(t),e.deleteMovieFromDB(t)},e.deleteMovieFromDB=function(){var t=Object(N.a)(M.a.mark((function t(a){var n,r,o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{authorization:"Bearer ".concat(e.state.user.token)}},r=e.props.match.params.theaterId,console.log("Deleting ".concat(a," from DB")),t.next=5,x.a.delete("/api/".concat(r,"/").concat(a),n).catch((function(e){return console.log(e)}));case 5:o=t.sent,console.log(o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteMovieFromState=function(t){var a=Object(g.a)({},e.state.movies);delete a[t],e.setState({movies:a})},e.loadSampleMovies=function(){var t=Object(g.a)(Object(g.a)({},e.state.movies),S);e.setState({movies:t}),e.loadSampleMoviesToDB()},e.loadSampleMoviesToDB=function(){console.log("Adding sample movies to DB"),Object.keys(S).forEach(function(){var t=Object(N.a)(M.a.mark((function t(a){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.saveNewMovieToDB(S[a]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),console.log("Sample Movies added to DB")},e.openModalNav=function(){e.setState({cartModalOpen:!0})},e.closeModalNav=function(t){e.setState({cartModalOpen:!1}),console.log(e.state)},e.openMobileNav=function(){e.setState({mobileNavOpen:!0})},e.closeMobileNav=function(){e.setState({mobileNavOpen:!1})},e.handleClick=function(t){console.log(t.currentTarget,t.target),t.currentTarget===t.target&&e.closeModalNav()},e.renderModal=function(){return r.a.createElement("div",{class:"modal__outside",onClick:e.handleClick},r.a.createElement(T,{addMovie:e.addMovie,closeModalNav:e.closeModalNav}))},e.renderLoadSampleMoviesBttn=function(){return r.a.createElement("button",{className:"add_sample_movies",onClick:e.loadSampleMovies},"Load Sample Movies")},e.storeUser=function(t,a){var n=Object(g.a)(Object(g.a)({},t),{},{token:a});e.setState({user:n})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.theaterId,a=JSON.parse(localStorage.getItem("".concat(t)));a&&this.setState({order:a}),console.log("running axios at "+"/api/".concat(t)),x.a.get("/api/".concat(t)).then((function(t){console.log(t.data);var a={};t.data.forEach((function(e){return a[e._id]=e})),console.log(a),e.setState({movies:a})})).catch((function(e){return console.log(e)})),document.addEventListener("keyup",this.handleKeyup)}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.theaterId,t=JSON.stringify(this.state.order);localStorage.setItem("".concat(e),t)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return this.state.user.token?r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{openMobileNav:this.openMobileNav,closeMobileNav:this.closeMobileNav,mobileNavOpen:this.state.mobileNavOpen,storeId:this.props.match.params.theaterId,openModalNav:this.openModalNav,isAdminPage:this.state.isAdminPage}),r.a.createElement("div",{className:"update_movies__container"},r.a.createElement("button",{className:"update_movies__add_movie_button",onClick:this.openModalNav},"+"),r.a.createElement("h1",{className:"update_movies__heading"},"Update Movies"),Object.keys(this.state.movies).map((function(t){return r.a.createElement(w,{movie:e.state.movies[t],updateMovie:e.updateMovie,key:t,index:t,deleteMovie:e.deleteMovie,saveMovieUpdateToDB:e.saveMovieUpdateToDB})})),this.state.cartModalOpen?this.renderModal():null,Object.keys(this.state.movies).length>0?null:this.renderLoadSampleMoviesBttn())):r.a.createElement(I,{storeUser:this.storeUser})}}]),a}(n.Component)),U=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={movies:{},order:{},mobileNavOpen:!1,cartModalOpen:!1,selectedMovie:null,isAdminPage:!1},e.handleKeyup=function(t){"Escape"===t.key&&e.closeModalNav()},e.handleClick=function(t){console.log(t.currentTarget,t.target),t.currentTarget===t.target&&e.closeModalNav()},e.addToOrder=function(t){var a=Object(g.a)({},e.state.order);a[t]?a[t]=a[t]+1:a[t]=1,e.setState({order:a})},e.subtractTicketFromOrder=function(t){var a=Object(g.a)({},e.state.order);1!==a[t]&&(a[t]=a[t]-1,e.setState({order:a}))},e.deleteFromOrder=function(t){var a=Object(g.a)({},e.state.order);delete a[t],e.setState({order:a})},e.selectMovie=function(t){console.log(t);var a=t;e.setState({selectedMovie:a})},e.openMobileNav=function(){e.setState({mobileNavOpen:!0})},e.closeMobileNav=function(){e.setState({mobileNavOpen:!1})},e.openModalNav=function(){e.setState({cartModalOpen:!0})},e.closeModalNav=function(t){e.setState({cartModalOpen:!1})},e.calcTotalTickets=function(){return Object.keys(e.state.order).reduce((function(t,a){return t+e.state.order[a]}),0)},e.renderModal=function(){return r.a.createElement("div",{class:"modal__outside",onClick:e.handleClick},r.a.createElement("div",{class:"modal__inner"},r.a.createElement(y,{movies:e.state.movies,order:e.state.order,deleteFromOrder:e.deleteFromOrder,subtractTicketFromOrder:e.subtractTicketFromOrder,addToOrder:e.addToOrder})))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.theaterId,a=JSON.parse(localStorage.getItem("".concat(t)));a&&this.setState({order:a}),console.log("running axios at "+"/api/".concat(t)),x.a.get("/api/".concat(t)).then((function(t){console.log(t.data);var a={};t.data.forEach((function(e){return a[e._id]=e})),console.log(a),e.setState({movies:a})})).catch((function(e){return console.log(e)})),document.addEventListener("keyup",this.handleKeyup)}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.theaterId,t=JSON.stringify(this.state.order);localStorage.setItem("".concat(e),t)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyup)}},{key:"render",value:function(){return r.a.createElement("div",{className:"theater_app"},r.a.createElement(b,{openMobileNav:this.openMobileNav,closeMobileNav:this.closeMobileNav,mobileNavOpen:this.state.mobileNavOpen,storeId:this.props.match.params.theaterId,openModalNav:this.openModalNav,isAdminPage:this.state.isAdminPage,calcTotalTickets:this.calcTotalTickets}),r.a.createElement("main",null,r.a.createElement(_,{movies:this.state.movies,selectMovie:this.selectMovie}),r.a.createElement(O,{selectedMovie:this.state.selectedMovie,addToOrder:this.addToOrder,movies:this.state.movies})),this.state.cartModalOpen&&this.renderModal())}}]),a}(r.a.Component),L=function(){return r.a.createElement("h2",null,"Not found!!!")},P=function(){return r.a.createElement(i.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:f}),r.a.createElement(s.a,{exact:!0,path:"/theater/:theaterId",component:U}),r.a.createElement(s.a,{exact:!0,path:"/theater/:theaterId/update-movies",component:F}),r.a.createElement(s.a,{exact:!0,path:"/login",component:I}),r.a.createElement(s.a,{component:L})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.2e8ac0f6.chunk.js.map